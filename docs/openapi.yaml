{"openapi":"3.0.1","info":{"title":"Bank Card System REST API","description":"REST API для управления банковскими картами."},"servers":[{"url":"http://localhost:8080","description":"Development server"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Cards","description":"Операции для управления картами"},{"name":"Transfer","description":"Операция для осуществления переводов между картами"},{"name":"Users","description":"Операции для управления пользователями"},{"name":"Accounts","description":"Операции для управления учетными записями пользователей"}],"paths":{"/api/v1/account/{userId}/card/{cardId}":{"get":{"tags":["Accounts"],"summary":"Получить конкретную карту по ID карты и пользователя","description":"Возвращает конкретную карту по ID карты и ID пользователя","operationId":"getCardByUserId","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Карта успешно отображаются","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}},"put":{"tags":["Accounts"],"summary":"Обновить карту пользователя","description":"Запрос на обновление карты пользователя","operationId":"updateCard","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardCreateDto"}}},"required":true},"responses":{"400":{"description":"Случилась ошибка при обновлении карты","content":{"application/json;charset=UTF-8":{"schema":{"type":"object"}}}},"200":{"description":"Карта успешно обновлена","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}},"delete":{"tags":["Accounts"],"summary":"Удалить карту пользователя","description":"Удаляет карту пользователя по ID карты","operationId":"deleteCardById","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Карта удалена","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/jwt":{"post":{"tags":["jwt-controller"],"operationId":"jwt","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RequestJwtDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/transfer/{userId}":{"post":{"tags":["Transfer"],"summary":"Перевод на другую карту","description":"Переводы балансов между своими картами пользователя","operationId":"transfer","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/TransferDto"}}},"required":true},"responses":{"400":{"description":"Случилась ошибка при переводе","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Перевод осуществлен успешно","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/account/{userId}/card":{"post":{"tags":["Accounts"],"summary":"Создать карту пользователя","description":"Запрос на создание карты пользователя","operationId":"createCard","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardCreateDto"}}},"required":true},"responses":{"200":{"description":"Карта успешно создана","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}},"400":{"description":"Случилась ошибка при создании карты","content":{"application/json;charset=UTF-8":{"schema":{"type":"object"}}}}}}},"/api/v1/cards/{id}/{status}":{"patch":{"tags":["Cards"],"summary":"Обновить статус карты","description":"Блокирует или активирует каты по ID карты пользователя","operationId":"updateStatus","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"status","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"400":{"description":"Нельзя обновить статус одним и тем же значением","content":{"*/*":{"schema":{"type":"string"}}}},"200":{"description":"Статус карты успешно обновлен","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/account/{userId}/block/{cardId}":{"patch":{"tags":["Accounts"],"summary":"Запрос на блокировку карты","description":"Запрос на блокировку карты по ID карты","operationId":"requestBlockCard","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Карта не найдена. Карта была уже заблокирована","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Карта успешно заблокирована","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/users":{"get":{"tags":["Users"],"summary":"Получить всех пользователей","description":"Возвращает список всех пользователей","operationId":"getAllUsers","responses":{"200":{"description":"Список пользователей","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"delete":{"tags":["Users"],"summary":"Удалить пользователей","description":"Удаляет пользователей по ID","operationId":"deleteUsersByIds","requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string","format":"uuid"}}}},"required":true},"responses":{"200":{"description":"Пользователи удалены","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/users/{id}":{"get":{"tags":["Users"],"summary":"Получить пользователя по ID","description":"Возвращает пользователя по указанному ID","operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Пользователь не найден","content":{"application/json;charset=UTF-8":{"schema":{"type":"object"}}}},"200":{"description":"Пользователь найден","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}}}},"delete":{"tags":["Users"],"summary":"Удалить пользователя","description":"Удаляет пользователя по ID","operationId":"deleteUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Пользователь удален","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/cards":{"get":{"tags":["Cards"],"summary":"Получить все карты","description":"Возвращает список всех карт","operationId":"getAllCards","responses":{"200":{"description":"Список карт пользователей","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}}},"/api/v1/cards/{id}":{"get":{"tags":["Cards"],"summary":"Получить карту пользователя по ID карты","description":"Возвращает карту по указанному ID","operationId":"getCardById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Карта не найдена","content":{"application/json;charset=UTF-8":{"schema":{"type":"object"}}}},"200":{"description":"Карта найдена","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}}},"/api/v1/account/{userId}/cards":{"get":{"tags":["Accounts"],"summary":"Получить все карты привязанные к пользователю","description":"Возвращает все карты пользователя, владельцем которых он является","operationId":"getCardsByUserId","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Карты успешно отображаются","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}},"delete":{"tags":["Accounts"],"summary":"Удалить карты пользователя","description":"Удаляет все карты пользователя по списку ID","operationId":"deleteCardsByIds","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"array","items":{"type":"string","format":"uuid"}}}},"required":true},"responses":{"200":{"description":"Карты удалены","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/account/{userId}/cards/filter":{"get":{"tags":["Accounts"],"summary":"Получить все карты привязанные к пользователю c учетом фильтрации и пагинации","description":"Возвращает все карты пользователя, владельцем которых он является, плюс фильтрация и пагинация","operationId":"getCardsByUserIdAndCriteria","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":20}},{"name":"status","in":"query","required":false,"schema":{"type":"string"}},{"name":"sortBy","in":"query","required":false,"schema":{"type":"string","default":"dateCreate"}},{"name":"sortDirection","in":"query","required":false,"schema":{"type":"string","default":"desc"}},{"name":"createdAfter","in":"query","required":false,"schema":{"type":"string","format":"date-time"}},{"name":"createdBefore","in":"query","required":false,"schema":{"type":"string","format":"date-time"}}],"responses":{"400":{"description":"Указаны невалидные параметры для фильтрации","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Карты успешно отображаются","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CardResponseDto"}}}}}}},"/api/v1/account/{userId}/card/{cardId}/balance":{"get":{"tags":["Accounts"],"summary":"Получить балансе по карте","description":"Возвращает баланс по карте пользователя","operationId":"getBalance","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}},{"name":"cardId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"404":{"description":"Карта не найдена","content":{"*/*":{"schema":{"type":"object"}}}},"200":{"description":"Баланс успешно отображается","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MoneyDto"}}}}}}},"/api/v1/account/{userId}/cards/full":{"delete":{"tags":["Accounts"],"summary":"Удалить все карты привязанные к пользователю","description":"Удаляет все карты пользователя, владельцем которых он является","operationId":"deleteCardsByUserId","parameters":[{"name":"userId","in":"path","required":true,"schema":{"type":"string","format":"uuid"}}],"responses":{"200":{"description":"Карты удалены","content":{"*/*":{"schema":{"type":"string"}}}}}}}},"components":{"schemas":{"CardCreateDto":{"required":["owner"],"type":"object","properties":{"owner":{"type":"string","description":"Владелец карты","example":"IVAN PETROV"}},"description":"Инициалы владельца для создания банковской карты"},"CardResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Уникальный идентификатор карты","format":"uuid","example":"550e8400-e29b-41d4-a716-446655441234"},"number":{"type":"string","description":"Номер карты","example":"1234567890123456"},"owner":{"type":"string","description":"Владелец карты","example":"IVAN PETROV"},"expirationDate":{"type":"string","description":"Дата истечения карты в формате MM/YY","example":"12/28"},"status":{"type":"string","description":"Статус карты","example":"active","enum":["ACTIVE","BLOCKED","EXPIRED"]},"deposit":{"type":"number","description":"Депозит карты","example":1000.5},"userId":{"type":"string","description":"Id пользователя владеющего картой","format":"uuid","example":"551e2345-e29b-41d4-a716-446655441234"},"dateCreate":{"type":"string","description":"Дата создания карты","format":"date-time"}},"description":"Информация о карте"},"RequestJwtDto":{"required":["login","name","password"],"type":"object","properties":{"login":{"type":"string","description":"Логин пользователя","example":"ivan_petrov"},"password":{"type":"string","description":"Пароль пользователя","example":"ivan_petrov"},"name":{"type":"string","description":"Имя пользователя","example":"Иван Петров"}},"description":"Данные для генерации jwt для зарегистрированного пользователя"},"TransferDto":{"type":"object","properties":{"toCardId":{"type":"string","format":"uuid"},"fromCardId":{"type":"string","format":"uuid"},"amount":{"type":"number"}}},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Уникальный идентификатор пользователя","format":"uuid","example":"550e8400-e29b-41d4-a716-446655440000"},"login":{"type":"string","description":"Логин пользователя","example":"ivan_petrov"},"name":{"type":"string","description":"Имя пользователя","example":"Иван Петров"},"dateCreate":{"type":"string","description":"Дата создания пользователя","format":"date-time"},"cards":{"type":"array","description":"Список карт","items":{"$ref":"#/components/schemas/CardResponseDto"}}},"description":"Информация о пользователе"},"MoneyDto":{"type":"object","properties":{"balance":{"type":"number"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}